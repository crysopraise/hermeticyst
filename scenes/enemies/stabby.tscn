[gd_scene load_steps=9 format=2]

[ext_resource path="res://assets/models/melee2blade_idle.anim" type="Animation" id=1]
[ext_resource path="res://scripts/enemies/melee_enemy.gd" type="Script" id=2]
[ext_resource path="res://scenes/other/Halo.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/models/melee2blade_stun.anim" type="Animation" id=4]
[ext_resource path="res://assets/models/melee2blade.tscn" type="PackedScene" id=5]

[sub_resource type="Animation" id=3]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("../AttackHitbox/CollisionShape:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ true ]
}

[sub_resource type="CapsuleShape" id=1]
radius = 1.4256
height = 1.19925

[sub_resource type="BoxShape" id=2]
extents = Vector3( 1.4, 1.18204, 1.27311 )

[node name="Stabby" type="KinematicBody" groups=["enemies"]]
collision_layer = 4
collision_mask = 5
script = ExtResource( 2 )
TURN_SPEED = 5.0
ATTACK_TIME = 2.4
ANIM_PREFIX = "melee2blade"
ATTACK_ANIM_SPEED = 2.5
ATTACK_DISTANCE = 15
PLAYER_KNOCK_BACK_SPEED = 40
ATTACK_ANGLE = 0.9
DRAG = 0.01

[node name="Model" parent="." instance=ExtResource( 5 )]

[node name="Physical Bone root" parent="Model/Armature/Skeleton" index="1"]
transform = Transform( 0.999738, 0.00907841, 0.0210104, -0.0147602, 0.957309, 0.288688, -0.0174926, -0.288924, 0.957193, -0.0164294, -0.225744, -0.748491 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.24495e-08, 6.19351e-07, 0.781965 )
body_offset = Transform( 1, 2.84053e-08, 2.6077e-08, -3.25963e-08, 1, -2.98023e-08, 2.23517e-08, -1.16229e-06, 1, -4.28408e-08, -5.96046e-07, -0.781965 )

[node name="Physical Bone neck" parent="Model/Armature/Skeleton" index="2"]
transform = Transform( 0.999575, -0.0249049, 0.0151396, -0.00820723, 0.257897, 0.966138, -0.0279665, -0.965851, 0.257582, 0.00917433, 1.17658, -0.537327 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.24585e-08, -1.48607e-07, 0.331826 )
body_offset = Transform( 1, 3.37139e-07, -1.58325e-07, 1.3411e-07, 1, 2.68221e-07, 3.0268e-07, -1.3411e-07, 1, 9.49949e-08, 5.96046e-08, -0.331826 )

[node name="Physical Bone collarboneR" parent="Model/Armature/Skeleton" index="3"]
transform = Transform( 0.179349, 0.84625, -0.501693, -0.955651, 0.028784, -0.293083, -0.233579, 0.532008, 0.813883, 0.144408, 1.31917, -1.16641 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4.12113e-08, 1.94647e-07, 0.283204 )
body_offset = Transform( 0.999997, 1.49012e-08, -1.19209e-07, 1.49012e-07, 1, -4.76837e-07, 6.4075e-07, -6.85453e-07, 1, -7.45058e-09, -5.96046e-08, -0.283204 )

[node name="Physical Bone bicepR" parent="Model/Armature/Skeleton" index="4"]
transform = Transform( -0.470957, 0.5788, -0.665725, -0.81409, -0.575843, 0.0752618, -0.339791, 0.577405, 0.742392, 0.771057, 1.21976, -0.957314 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.8031e-07, -4.97575e-07, 0.434725 )
body_offset = Transform( 1, 0, 1.19209e-07, 5.06639e-07, 1, -8.9407e-08, 2.08616e-07, -8.9407e-08, 1, -4.32134e-07, 5.36442e-07, -0.434725 )

[node name="Physical Bone ForearmR" parent="Model/Armature/Skeleton" index="5"]
transform = Transform( -0.538593, 0.459853, 0.706012, -0.539339, -0.831928, 0.130423, 0.647327, -0.310535, 0.696087, 0.622713, 0.684904, -0.489634 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6.21395e-07, 1.89459e-07, 0.512984 )
body_offset = Transform( 1, 1.63913e-07, 8.04663e-07, -4.47035e-08, 1, 3.27826e-07, 0, 0, 1, 2.08616e-07, -3.57628e-07, -0.512984 )

[node name="Physical Bone collarboneL" parent="Model/Armature/Skeleton" index="6"]
transform = Transform( 0.22788, -0.822627, 0.520915, 0.940354, 0.0471434, -0.336917, 0.252599, 0.56662, 0.784305, -0.158012, 1.33173, -1.15779 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.53612e-07, 8.49254e-08, 0.283204 )
body_offset = Transform( 1, -5.06639e-07, -3.27826e-07, -5.36442e-07, 0.999998, -8.9407e-08, 1.04308e-07, 3.57628e-07, 1, -2.6077e-07, -5.96046e-08, -0.283204 )

[node name="Physical Bone bicepL" parent="Model/Armature/Skeleton" index="7"]
transform = Transform( -0.885933, -0.422212, -0.191988, 0.33561, -0.869264, 0.362969, -0.320138, 0.257133, 0.911808, -0.392969, 1.10522, -1.01112 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6.27133e-07, 1.49012e-08, 0.434726 )
body_offset = Transform( 1, -5.96046e-08, 2.08616e-07, 1.49012e-08, 1, 0, -2.08616e-07, 4.47035e-08, 1, 5.36442e-07, -1.49012e-08, -0.434726 )

[node name="Physical Bone ForearmL" parent="Model/Armature/Skeleton" index="8"]
transform = Transform( -0.761523, -0.506329, -0.404616, 0.56224, -0.826633, -0.0237509, -0.322443, -0.245579, 0.914178, -0.635961, 0.519416, -0.860129 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 5.15736e-07, -3.54532e-07, 0.512985 )
body_offset = Transform( 1, -1.86265e-07, 4.47035e-07, 4.61936e-07, 1, -2.38419e-07, -1.78814e-07, -1.49012e-07, 1, -7.45058e-07, 4.76837e-07, -0.512985 )

[node name="Physical Bone pelvisR" parent="Model/Armature/Skeleton" index="9"]
transform = Transform( 0.080553, 0.947079, -0.31073, 0.371581, 0.260738, 0.891035, 0.924898, -0.187237, -0.330913, 0.0492758, -0.1413, 0.0524766 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3.52902e-07, -1.3516e-07, 0.15858 )
body_offset = Transform( 0.999999, 0, -2.98023e-08, -1.63913e-07, 1, 1.00583e-07, 5.66244e-07, -3.53903e-07, 1, 3.57628e-07, 1.19209e-07, -0.15858 )

[node name="Physical Bone pelvisL" parent="Model/Armature/Skeleton" index="10"]
transform = Transform( 0.0378872, -0.947538, 0.317392, -0.372865, 0.281276, 0.884226, -0.927112, -0.151845, -0.342647, -0.0503318, -0.14022, 0.0543369 )
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.56935e-07, -6.10508e-08, 0.158579 )
body_offset = Transform( 1, 3.27826e-07, 4.47035e-07, -1.04308e-07, 1, -1.78814e-07, 2.38419e-07, 2.71946e-07, 1, -3.27826e-07, 8.9407e-08, -0.158579 )

[node name="AnimationPlayer" parent="Model" index="3"]
autoplay = "melee2blade_idle"
anims/RESET = SubResource( 3 )
anims/melee2blade_idle = ExtResource( 1 )
anims/melee2blade_stun = ExtResource( 4 )

[node name="Body" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.20006, 0 )
shape = SubResource( 1 )

[node name="Timer" type="Timer" parent="."]
wait_time = 0.5
one_shot = true

[node name="Light" type="OmniLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.19642, -0.182277 )
light_energy = 2.15
light_indirect_energy = 0.0
light_specular = 0.37
omni_range = 5.6
omni_attenuation = 2.82843

[node name="NegLight" type="OmniLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.994454, -0.0804796 )
visible = false
light_energy = 0.99
light_indirect_energy = 0.0
light_negative = true
light_specular = 0.37
omni_range = 1.9
omni_attenuation = 1.62451

[node name="Halo" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.75, 0, 0, 0, 0.75, 0, 0, 0, 0.75, 0.00382447, 0.787192, -0.318156 )

[node name="CastPoint" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.824959 )

[node name="AttackHitbox" type="Area" parent="."]
collision_layer = 0
collision_mask = 34

[node name="CollisionShape" type="CollisionShape" parent="AttackHitbox"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -2.92002 )
shape = SubResource( 2 )
disabled = true

[connection signal="timeout" from="Timer" to="." method="_on_timeout"]
[connection signal="area_entered" from="AttackHitbox" to="." method="_on_hit_attack"]
[connection signal="body_entered" from="AttackHitbox" to="." method="_on_hit_player"]

[editable path="Model"]
