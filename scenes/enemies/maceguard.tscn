[gd_scene load_steps=6 format=2]

[ext_resource path="res://assets/models/maceguard.tscn" type="PackedScene" id=1]
[ext_resource path="res://scripts/enemies/melee_enemy.gd" type="Script" id=2]

[sub_resource type="Animation" id=3]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("../AttackHitbox/CollisionShape:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ true ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("..:attack_boost")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1.0 ]
}

[sub_resource type="CapsuleShape" id=1]
radius = 1.44497
height = 1.82536

[sub_resource type="BoxShape" id=2]
extents = Vector3( 0.989592, 0.938066, 1.44272 )

[node name="MaceGuard" type="KinematicBody" groups=["enemies"]]
collision_layer = 4
collision_mask = 5
script = ExtResource( 2 )
ATTACK_TIME = 4.0
COOLDOWN_TIME = 2.0
ANIM_PREFIX = "mace"
ATTACK_ANIM_SPEED = 1.5
ATTACK_DISTANCE = 40

[node name="Model" parent="." instance=ExtResource( 1 )]

[node name="Skeleton" parent="Model/Armature" index="0"]
bones/15/bound_children = [ NodePath("BoneAttachment") ]

[node name="Physical Bone root" parent="Model/Armature/Skeleton" index="1"]
transform = Transform( 0.985698, -0.064798, -0.155568, 0.0924776, 0.979697, 0.177881, 0.140883, -0.189723, 0.971677, 0.0685046, -0.532027, -0.381741 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.21541e-08, -1.08732e-07, 0.440352 )
body_offset = Transform( 0.983613, -0.05086, 0.172968, 0.049032, 0.998687, 0.0148271, -0.173496, -0.00610317, 0.984815, -0.076167, -0.00652903, -0.433665 )

[node name="Physical Bone spine" parent="Model/Armature/Skeleton" index="2"]
transform = Transform( 0.952513, 0.131856, -0.274471, -0.178756, 0.971851, -0.153467, 0.246509, 0.195243, 0.94927, 0.0323411, 0.459118, -0.430177 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0424352, 0.0141, 0.331838 )
body_offset = Transform( 0.912242, 0.0231234, 0.408999, -0.0596256, 0.995268, 0.0767214, -0.40529, -0.0943754, 0.909304, -0.174759, -0.0369622, -0.283212 )

[node name="Physical Bone neck" parent="Model/Armature/Skeleton" index="3"]
transform = Transform( 0.952513, -0.125655, -0.277365, -0.178756, 0.506663, -0.843409, 0.246509, 0.852938, 0.460141, 0.163398, 1.45146, -0.216985 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.003589, 0.0500504, 0.512717 )
body_offset = Transform( 0.912242, 0.328311, 0.245004, -0.348916, 0.936084, 0.0447701, -0.214646, -0.126327, 0.968488, -0.145324, -0.0685535, -0.489468 )

[node name="Physical Bone shoulderR" parent="Model/Armature/Skeleton" index="4"]
transform = Transform( 0.359035, -0.908625, 0.213291, 0.684698, 0.101122, -0.721777, 0.634257, 0.405183, 0.658441, -0.0804775, 1.41221, -0.331208 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0329077, 0.0325013, 0.546259 )
body_offset = Transform( 0.913982, 0.404207, -0.035395, -0.384071, 0.833707, -0.396763, -0.130865, 0.376229, 0.917238, -0.0238794, 0.202277, -0.508971 )

[node name="Physical Bone bicepR" parent="Model/Armature/Skeleton" index="5"]
transform = Transform( 0.997576, 0.0317234, 0.0619243, 0.0627801, -0.0267289, -0.997669, -0.0299948, 0.999139, -0.0286559, -0.928146, 1.55871, 0.433427 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0671048, -0.532699, 0.415549 )
body_offset = Transform( 0.873111, 0.141892, 0.466415, -0.397127, 0.761935, 0.511611, -0.282783, -0.631919, 0.721603, -0.0596423, 0.166633, -0.65546 )

[node name="Physical Bone forearmR" parent="Model/Armature/Skeleton" index="6"]
transform = Transform( 0.761202, 0.645094, 0.0665148, -0.586409, 0.728472, -0.35419, -0.276941, 0.230606, 0.932804, -0.797915, 1.24238, 0.74929 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0274667, -0.755524, -0.0520002 )
body_offset = Transform( 0.895963, -0.425914, 0.125885, 0.214435, 0.663065, 0.71719, -0.388932, -0.615581, 0.685412, -0.339852, 0.532366, -0.418762 )

[node name="Physical Bone handR" parent="Model/Armature/Skeleton" index="7"]
transform = Transform( 0.487129, 0.542175, -0.684654, -0.658332, 0.743092, 0.120049, 0.573849, 0.392251, 0.718913, 0.312022, 1.39527, 0.919966 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0661694, -1.03394, 0.794742 )
body_offset = Transform( 0.632741, -0.720797, 0.283, -0.048801, 0.327618, 0.943548, -0.772824, -0.610833, 0.172122, -0.928306, -0.414369, -0.819496 )

[node name="Physical Bone FingerR" parent="Model/Armature/Skeleton" index="8"]
transform = Transform( 0.239495, -0.0738155, -0.968087, -0.816793, -0.554357, -0.159798, -0.52487, 0.828998, -0.193058, 0.541813, 1.76285, 1.27032 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.240326, 0.669833, 1.639 )
body_offset = Transform( 0.742012, 0.236513, -0.627278, 0.559039, 0.298116, 0.773695, 0.36999, -0.924763, 0.0889854, 0.691361, -1.60213, 0.384671 )

[node name="Physical Bone shoulderL" parent="Model/Armature/Skeleton" index="9"]
transform = Transform( 0.425736, 0.50061, -0.75375, -0.798912, -0.183148, -0.572883, -0.424838, 0.846076, 0.321971, 0.415143, 1.3359, -0.158764 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0295464, 0.042069, 0.537719 )
body_offset = Transform( 0.972411, 0.231554, -0.0282735, -0.206717, 0.911519, 0.355528, 0.108095, -0.339875, 0.934238, 0.0341932, -0.235629, -0.484865 )

[node name="Physical Bone bicepL" parent="Model/Armature/Skeleton" index="10"]
transform = Transform( 0.454248, -0.634394, -0.625464, -0.881699, -0.219627, -0.417577, 0.12754, 0.741153, -0.659109, 0.800748, 1.02732, 1.14619 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.148432, 0.410174, 0.562707 )
body_offset = Transform( 0.999315, 0.0351432, 0.0116394, -0.0368714, 0.973078, 0.227508, -0.00333212, -0.227781, 0.973706, 0.127366, -0.532624, -0.454976 )

[node name="Physical Bone forearmL" parent="Model/Armature/Skeleton" index="11"]
transform = Transform( -0.703848, -0.662588, 0.256076, -0.176608, 0.512399, 0.840392, -0.688046, 0.546283, -0.477669, 0.133855, 0.372275, 1.76218 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.580387, 0.425816, 0.138775 )
body_offset = Transform( 0.520729, -0.836752, 0.169379, 0.795415, 0.547584, 0.259747, -0.310093, -0.000531301, 0.950707, 0.0305722, -0.730865, 0.0482657 )

[node name="Physical Bone handL" parent="Model/Armature/Skeleton" index="12"]
transform = Transform( -0.0505917, 0.093576, 0.994326, -0.908481, 0.409246, -0.0847372, -0.414854, -0.907613, 0.0643082, -0.341441, 1.02346, 1.97836 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.476478, 0.534132, -0.876921 )
body_offset = Transform( 0.772013, 0.0938602, 0.628639, -0.105483, 0.994242, -0.0189063, -0.626794, -0.0517148, 0.777468, 0.133286, -0.497375, 1.00805 )

[node name="Physical Bone FingerL" parent="Model/Armature/Skeleton" index="13"]
transform = Transform( 0.815403, 0.518027, 0.258398, -0.0192814, 0.470422, -0.882232, -0.578576, 0.714393, 0.39357, -0.158556, 1.2918, 1.59207 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.420183, -1.10273, -0.330079 )
body_offset = Transform( 0.819903, 0.432887, -0.374662, -0.53016, 0.821101, -0.211487, 0.216084, 0.372029, 0.90272, 0.698198, 0.612881, 0.799011 )

[node name="Physical Bone ribsr" parent="Model/Armature/Skeleton" index="14"]
transform = Transform( 0.618946, -0.644211, 0.449329, 0.577759, -0.0141073, -0.816086, 0.532071, 0.764716, 0.363467, -0.293409, 0.838376, -0.312129 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.038234, -0.0117112, 0.546905 )
body_offset = Transform( 0.938894, 0.337156, -0.069308, -0.344086, 0.92466, -0.163115, 0.00909084, 0.176995, 0.98417, 0.00595567, 0.113193, -0.536522 )

[node name="Physical Bone ribsl" parent="Model/Armature/Skeleton" index="15"]
transform = Transform( 0.736755, 0.561107, -0.377295, -0.4957, 0.0687178, -0.865771, -0.459863, 0.824886, 0.328769, 0.141384, 0.864509, -0.29388 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0186155, 0.0388082, 0.512421 )
body_offset = Transform( 0.994678, 0.0996373, 0.0262284, -0.102082, 0.987526, 0.119888, -0.0139566, -0.121927, 0.992441, -0.0358231, -0.097857, -0.503555 )

[node name="Physical Bone tail" parent="Model/Armature/Skeleton" index="16"]
transform = Transform( -0.966835, -0.250366, 0.0504803, 0.21795, -0.705731, 0.674121, -0.133152, 0.662766, 0.736892, -0.0121581, -0.616057, -0.131339 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.42144e-08, -2.5332e-07, 0.240846 )
body_offset = Transform( 0.961911, 0.0570112, -0.267354, -0.213226, 0.768489, -0.603288, 0.171065, 0.637317, 0.751374, 0.0643913, 0.1453, -0.180965 )

[node name="Physical Bone tail001" parent="Model/Armature/Skeleton" index="17"]
transform = Transform( -0.892403, 0.204011, -0.402486, -0.152361, -0.975806, -0.156796, -0.424737, -0.0786014, 0.901897, -0.141559, -1.00739, 0.186546 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0898702, -0.0376178, -0.151525 )
body_offset = Transform( 0.987615, 0.00180244, -0.156881, -0.0405851, 0.968832, -0.244365, 0.151551, 0.247705, 0.956908, 0.0650536, -0.00422955, 0.167934 )

[node name="Physical Bone tail002" parent="Model/Armature/Skeleton" index="18"]
transform = Transform( -0.775418, 0.59689, -0.206033, -0.468019, -0.76231, -0.447037, -0.423893, -0.250214, 0.870465, -0.0604738, -1.29376, 0.139014 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.103637, 0.057252, -0.186189 )
body_offset = Transform( 0.995329, 0.0871642, -0.0415021, -0.0896093, 0.994093, -0.0612317, 0.0359197, 0.0646648, 0.99726, 0.0904356, -0.0776014, 0.185699 )

[node name="Physical Bone tail003" parent="Model/Armature/Skeleton" index="19"]
transform = Transform( -0.726161, 0.565822, 0.390556, -0.663506, -0.427911, -0.613719, -0.180132, -0.704796, 0.68616, 0.0893903, -1.56562, 0.104981 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.218121, 0.239099, -0.0987394 )
body_offset = Transform( 0.89681, 0.441475, 0.0288134, -0.349046, 0.666027, 0.659222, 0.271839, -0.601255, 0.751396, 0.0929016, -0.170289, 0.277245 )

[node name="Physical Bone tail004" parent="Model/Armature/Skeleton" index="20"]
transform = Transform( -0.686348, 0.307446, 0.659093, -0.726081, -0.341533, -0.596792, 0.0416213, -0.888163, 0.457641, 0.145529, -1.73335, -0.0714427 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.418262, 0.106112, 0.229739 )
body_offset = Transform( 0.745741, 0.496413, 0.444347, -0.621805, 0.279114, 0.731747, 0.239226, -0.821991, 0.516819, 0.157156, -0.457806, 0.0685484 )

[node name="Physical Bone riblowerr" parent="Model/Armature/Skeleton" index="21"]
transform = Transform( -0.914626, -0.365538, 0.172745, 0.092102, 0.227654, 0.969375, -0.39367, 0.902527, -0.174551, -0.0917083, -0.968328, 0.138806 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.30385e-07, -2.94298e-07, 0.530889 )
body_offset = Transform( 0.947983, -0.314047, -0.05199, 0.310466, 0.948233, -0.066819, 0.0702831, 0.047202, 0.996408, 0.0276007, 0.0354737, -0.528982 )

[node name="Physical Bone bottomrib" parent="Model/Armature/Skeleton" index="22"]
transform = Transform( -0.988677, -0.147357, -0.0283622, 0.00734177, -0.236276, 0.971659, -0.149883, 0.960447, 0.234682, 0.0112347, -0.838586, -0.0468224 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4.61005e-08, -1.88396e-07, 0.396115 )
body_offset = Transform( 0.996048, -0.0872258, -0.016722, 0.0872165, 0.996189, -0.00127479, 0.0167695, -0.000188425, 0.999858, 0.00662379, 0.000505149, -0.396059 )

[node name="Physical Bone riblowerl" parent="Model/Armature/Skeleton" index="23"]
transform = Transform( -0.969515, 0.239032, -0.0539021, -0.00809072, 0.18863, 0.982013, 0.244901, 0.952513, -0.180945, 0.0286158, -0.975037, 0.1422 )
collision_layer = 0
collision_mask = 35
joint_offset = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.13621e-07, 4.014e-07, 0.530889 )
body_offset = Transform( 0.998218, -0.0428282, 0.0415748, 0.0438639, 0.998741, -0.0243384, -0.04048, 0.0261183, 0.998837, -0.0220715, 0.0129206, -0.530272 )

[node name="BoneAttachment" parent="Model/Armature/Skeleton" index="24"]
transform = Transform( 0.594798, 0.0795745, 0.799927, -0.716216, 0.504321, 0.482385, -0.365034, -0.859842, 0.356962, -1.18751, 0.883487, 1.23951 )

[node name="RemoteTransform" parent="Model/Armature/Skeleton/BoneAttachment" index="0"]
remote_path = NodePath("../../../../../AttackHitbox")

[node name="AnimationPlayer" parent="Model" index="1"]
autoplay = "mace_idle"
anims/RESET = SubResource( 3 )

[node name="Body" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0 )
shape = SubResource( 1 )

[node name="Timer" type="Timer" parent="."]

[node name="AttackHitbox" type="Area" parent="."]
transform = Transform( -0.594798, -0.0795746, -0.799927, -0.716216, 0.504321, 0.482385, 0.365034, 0.859842, -0.356962, 1.18751, 0.883487, -0.806038 )
collision_layer = 0
collision_mask = 34

[node name="CollisionShape" type="CollisionShape" parent="AttackHitbox"]
transform = Transform( 0.714082, 0.16326, 0.680759, 2.98023e-08, 0.972426, -0.233208, -0.700062, 0.16653, 0.694392, -2.24374, 0.806482, -2.54596 )
shape = SubResource( 2 )
disabled = true

[connection signal="timeout" from="Timer" to="." method="_on_timeout"]
[connection signal="area_entered" from="AttackHitbox" to="." method="_on_hit_attack"]
[connection signal="body_entered" from="AttackHitbox" to="." method="_on_hit_player"]

[editable path="Model"]
